import{c as C,d as M,f as u,I as T,e as A,_ as R}from"./index-D83nRd-A.js";import{e as V,a6 as j,r as c,a7 as q,h as v,q as b,C as e,y as d,N as r,a2 as l,v as a,s as B}from"./libs-CfNwz28r.js";import{T as F,S as O,P as U,a as $,M as E}from"./arcoDesign-COq-vaMw.js";const G=V({__name:"peerListModal",setup(H,{expose:y}){const{t:s}=j(),i=c(!1),_=c(""),f=c(""),g=c("");y({showModal:(m,n,o)=>{_.value=m,f.value=n,g.value=o,i.value=!0,S(m,n)}});const x=()=>{i.value=!1,_.value="",f.value=""},{data:I,loading:L,run:S,cancel:N}=q(C,{defaultParams:[_.value,f.value],manual:!0,pollingInterval:1e3}),z=[{title:()=>s("page.dashboard.peerList.column.address"),slotName:"peerAddress",width:400},{title:()=>s("page.dashboard.peerList.column.port"),dataIndex:"peer.address.port",width:100},{title:()=>s("page.dashboard.peerList.column.flag"),dataIndex:"peer.flags",width:100},{title:"Peer ID",dataIndex:"peer.id",width:100},{title:()=>s("page.dashboard.peerList.column.clientName"),dataIndex:"peer.clientName",width:400},{title:()=>s("page.dashboard.peerList.column.speed"),slotName:"speed",width:100},{title:()=>s("page.dashboard.peerList.column.uploadedDownloaded"),slotName:"uploadDownload",width:100},{title:()=>s("page.dashboard.peerList.column.progress"),slotName:"progress",width:100}];return(m,n)=>{const o=F,w=T,h=A,p=O,D=U,P=$,k=E;return v(),b(k,{"hide-cancel":"",closable:"",visible:i.value,"onUpdate:visible":n[0]||(n[0]=t=>i.value=t),onOk:x,fullscreen:"",width:"auto",onClose:n[1]||(n[1]=t=>l(N)())},{title:e(()=>[d(r(l(s)("page.dashboard.peerList.title")+g.value),1)]),default:e(()=>[a(P,{columns:z,data:l(I),loading:l(L),pagination:{showPageSize:!0,baseSize:4,bufferSize:1,pageSize:15}},{peerAddress:e(({record:t})=>[a(o,{copyable:"",code:""},{default:e(()=>[t.geo&&t.geo.countryRegion?(v(),b(M,{key:0,iso:t.geo.countryRegion},null,8,["iso"])):B("",!0),d(" "+r(t.peer.address.ip),1)]),_:2},1024)]),speed:e(({record:t})=>[a(p,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[a(p,{fill:"",direction:"vertical"},{default:e(()=>[a(o,null,{default:e(()=>[a(w,{class:"green"}),d(" "+r(l(u)(t.peer.uploadSpeed))+"/s ",1)]),_:2},1024),a(o,null,{default:e(()=>[a(h,{class:"red"}),d(" "+r(l(u)(t.peer.downloadSpeed))+"/s ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),uploadDownload:e(({record:t})=>[a(p,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[a(p,{fill:"",direction:"vertical"},{default:e(()=>[a(o,null,{default:e(()=>[a(w,{class:"green"}),d(" "+r(l(u)(t.peer.uploaded)),1)]),_:2},1024),a(o,null,{default:e(()=>[a(h,{class:"red"}),d(" "+r(l(u)(t.peer.downloaded)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),progress:e(({record:t})=>[a(p,null,{default:e(()=>[a(D,{percent:t.peer.progress,size:"mini"},null,8,["percent"]),a(o,null,{default:e(()=>[d(r((t.peer.progress*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["data","loading"])]),_:1},8,["visible"])}}}),W=R(G,[["__scopeId","data-v-5d7d2767"]]);export{W as default};
