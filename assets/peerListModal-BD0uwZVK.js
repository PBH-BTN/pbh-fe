import{c as j,d as O,f as _,I as R,e as q,h as z,_ as U}from"./index-CN6IAgMa.js";import{e as $,a6 as E,r as m,a7 as G,h as c,q as h,C as a,y as r,N as l,a2 as d,v as t,s as x,m as H,j as L,F as J,O as K}from"./libs-Du3C3Xh-.js";import{T as Q,S as W,P as X,m as Y,a as Z,M as ee}from"./arcoDesign-HsKCA9Oj.js";const ae=$({__name:"peerListModal",setup(te,{expose:I}){const{t:o}=E(),u=m(!1),f=m(""),g=m(""),w=m("");I({showModal:(p,s,n)=>{f.value=p,g.value=s,w.value=n,u.value=!0,D(p,s)}});const N=()=>{u.value=!1,f.value="",g.value=""},{data:k,loading:C,run:D,cancel:S}=G(j,{defaultParams:[f.value,g.value],manual:!0,pollingInterval:1e3}),T=[{title:()=>o("page.dashboard.peerList.column.address"),slotName:"peerAddress",width:400},{title:()=>o("page.dashboard.peerList.column.port"),dataIndex:"peer.address.port",width:100},{title:()=>o("page.dashboard.peerList.column.flag"),slotName:"flags",width:100},{title:"Peer ID",dataIndex:"peer.id",width:100},{title:()=>o("page.dashboard.peerList.column.clientName"),dataIndex:"peer.clientName",width:400},{title:()=>o("page.dashboard.peerList.column.speed"),slotName:"speed",width:100},{title:()=>o("page.dashboard.peerList.column.uploadedDownloaded"),slotName:"uploadDownload",width:100},{title:()=>o("page.dashboard.peerList.column.progress"),slotName:"progress",width:100}],F=p=>p.split(" ").map(s=>s+" - "+o("page.dashboard.peerList.column.flags."+s.trim()));return(p,s)=>{const n=Q,v=R,b=q,i=W,M=X,P=z,A=Y,B=Z,V=ee;return c(),h(V,{"hide-cancel":"",closable:"",visible:u.value,"onUpdate:visible":s[0]||(s[0]=e=>u.value=e),onOk:N,fullscreen:"",width:"auto",onClose:s[1]||(s[1]=e=>d(S)())},{title:a(()=>[r(l(d(o)("page.dashboard.peerList.title")+w.value),1)]),default:a(()=>[t(B,{columns:T,data:d(k),loading:d(C),"virtual-list-props":{height:850},pagination:!1},{peerAddress:a(({record:e})=>[t(n,{copyable:"",code:""},{default:a(()=>[e.geo&&e.geo.countryRegion?(c(),h(O,{key:0,iso:e.geo.countryRegion},null,8,["iso"])):x("",!0),r(" "+l(e.peer.address.ip),1)]),_:2},1024)]),speed:a(({record:e})=>[t(i,{fill:"",style:{"justify-content":"space-between"}},{default:a(()=>[t(i,{fill:"",direction:"vertical"},{default:a(()=>[t(n,null,{default:a(()=>[t(v,{class:"green"}),r(" "+l(d(_)(e.peer.uploadSpeed))+"/s ",1)]),_:2},1024),t(n,null,{default:a(()=>[t(b,{class:"red"}),r(" "+l(d(_)(e.peer.downloadSpeed))+"/s ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),uploadDownload:a(({record:e})=>[t(i,{fill:"",style:{"justify-content":"space-between"}},{default:a(()=>[t(i,{fill:"",direction:"vertical"},{default:a(()=>[t(n,null,{default:a(()=>[t(v,{class:"green"}),r(" "+l(d(_)(e.peer.uploaded)),1)]),_:2},1024),t(n,null,{default:a(()=>[t(b,{class:"red"}),r(" "+l(d(_)(e.peer.downloaded)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),progress:a(({record:e})=>[t(i,null,{default:a(()=>[t(M,{percent:e.peer.progress,size:"mini"},null,8,["percent"]),t(n,null,{default:a(()=>[r(l((e.peer.progress*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1024)]),flags:a(({record:e})=>[H("p",null,[r(l(e.peer.flags)+" ",1),e.peer.flags?(c(),h(A,{key:0},{content:a(()=>[(c(!0),L(J,null,K(F(e.peer.flags),y=>(c(),L("p",{key:y},l(y),1))),128))]),default:a(()=>[t(P)]),_:2},1024)):x("",!0)])]),_:1},8,["data","loading"])]),_:1},8,["visible"])}}}),ne=U(ae,[["__scopeId","data-v-bd800595"]]);export{ne as default};
