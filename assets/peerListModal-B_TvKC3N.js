import{h as R,i as z,f as m,I as O,j as U,k as $,c as q}from"./index-Yhm2PUtN.js";import{f as E,a4 as G,r as f,a5 as H,j as u,s as w,t as e,v as d,x as l,a2 as n,y as a,u as I,p as J,k,F as K,P as Q}from"./libs-CpxaUM-P.js";import{T as W,S as X,P as Y,e as Z,a as ee,M as ae}from"./arcoDesign-38g_n_En.js";const te=E({__name:"peerListModal",setup(se,{expose:N}){const{t:o}=G(),_=f(!1),g=f(""),h=f(""),v=f("");N({showModal:(p,s,r)=>{g.value=p,h.value=s,v.value=r,_.value=!0,S(p,s)}});const D=()=>{_.value=!1,g.value="",h.value=""},{data:b,loading:P,run:S,cancel:T}=H(R,{defaultParams:[g.value,h.value],manual:!0,pollingInterval:1e3}),C=[{title:()=>o("page.dashboard.peerList.column.address"),slotName:"peerAddress",width:400},{title:()=>o("page.dashboard.peerList.column.port"),dataIndex:"peer.address.port",width:100},{title:()=>o("page.dashboard.peerList.column.flag"),slotName:"flags",width:100},{title:"Peer ID",dataIndex:"peer.id",width:100},{title:()=>o("page.dashboard.peerList.column.clientName"),dataIndex:"peer.clientName",width:400},{title:()=>o("page.dashboard.peerList.column.speed"),slotName:"speed",width:100},{title:()=>o("page.dashboard.peerList.column.uploadedDownloaded"),slotName:"uploadDownload",width:100},{title:()=>o("page.dashboard.peerList.column.progress"),slotName:"progress",width:100}],F=p=>p.split(" ").map(s=>s+" - "+o("page.dashboard.peerList.column.flags."+s.trim()));return(p,s)=>{const r=W,y=O,x=U,i=X,M=Y,j=$,A=Z,B=ee,V=ae;return u(),w(V,{"hide-cancel":"",closable:"",visible:_.value,"onUpdate:visible":s[0]||(s[0]=c=>_.value=c),onOk:D,fullscreen:"",width:"auto",onClose:s[1]||(s[1]=c=>n(T)())},{title:e(()=>[d(l(n(o)("page.dashboard.peerList.title")+v.value),1)]),default:e(()=>{var c;return[a(B,{columns:C,data:(c=n(b))==null?void 0:c.data,loading:!n(P)&&!n(b),"virtual-list-props":{height:850},pagination:!1},{peerAddress:e(({record:t})=>[a(r,{copyable:"",code:""},{default:e(()=>[t.geo&&t.geo.countryRegion?(u(),w(z,{key:0,iso:t.geo.countryRegion},null,8,["iso"])):I("",!0),d(" "+l(t.peer.address.ip),1)]),_:2},1024)]),speed:e(({record:t})=>[a(i,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[a(i,{fill:"",direction:"vertical"},{default:e(()=>[a(r,null,{default:e(()=>[a(y,{class:"green"}),d(" "+l(n(m)(t.peer.uploadSpeed))+"/s ",1)]),_:2},1024),a(r,null,{default:e(()=>[a(x,{class:"red"}),d(" "+l(n(m)(t.peer.downloadSpeed))+"/s ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),uploadDownload:e(({record:t})=>[a(i,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[a(i,{fill:"",direction:"vertical"},{default:e(()=>[a(r,null,{default:e(()=>[a(y,{class:"green"}),d(" "+l(n(m)(t.peer.uploaded)),1)]),_:2},1024),a(r,null,{default:e(()=>[a(x,{class:"red"}),d(" "+l(n(m)(t.peer.downloaded)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),progress:e(({record:t})=>[a(i,null,{default:e(()=>[a(M,{percent:t.peer.progress,size:"mini"},null,8,["percent"]),a(r,null,{default:e(()=>[d(l((t.peer.progress*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1024)]),flags:e(({record:t})=>[J("p",null,[d(l(t.peer.flags)+" ",1),t.peer.flags?(u(),w(A,{key:0},{content:e(()=>[(u(!0),k(K,null,Q(F(t.peer.flags),L=>(u(),k("p",{key:L},l(L),1))),128))]),default:e(()=>[a(j)]),_:2},1024)):I("",!0)])]),_:1},8,["data","loading"])]}),_:1},8,["visible"])}}}),re=q(te,[["__scopeId","data-v-d61a7e66"]]);export{re as default};
