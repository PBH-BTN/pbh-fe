const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./dummyChart-Cl9kqvqv.js","./echarts-B_IqDoio.js","./libs-CpxaUM-P.js","./index-B7sxMh_1.js","./arcoDesign-BGRPN1Ww.js","./index-BXIbBrXO.css"])))=>i.map(i=>d[i]);
import{u as U,a as E,g as B,b as M,f as de,_ as we,c as le}from"./index-B7sxMh_1.js";import{u as F,E as j,i as N,a as ue,b as re,c as q,d as ie,e as pe,f as De,g as xe}from"./echarts-B_IqDoio.js";import{f as V,a4 as A,c as T,a as W,r as z,w as G,a5 as X,j as y,s as x,t as l,y as n,a2 as s,v as b,x as g,u as ke,l as Se,a6 as Oe,k as R,A as me,n as Ve,M as Te,N as Ce,p as ce,o as Re,I as Ae,F as ae,P as oe,q as Le}from"./libs-CpxaUM-P.js";import{aj as h,L as J,R as $e,r as Pe,F as Y,ak as te,t as H,a3 as K,C as I,al as he,am as fe,V as _e,T as ge,S as ve,an as ye,e as be,B as Ie,af as Ue,w as ze,v as Ee}from"./arcoDesign-BGRPN1Ww.js";import{I as Be}from"./index-CQSpwISg.js";async function Me(f,e=!1){const a=U();await a.serverAvailable;const t=new URLSearchParams({type:"count",field:f,filter:e?"0.01":"0"}),r=new URL(E(a.endpoint,"api/statistic/analysis/field?"+t.toString()),location.href);return fetch(r,{headers:B()}).then(o=>(a.assertResponseLogin(o),o.json()))}async function Fe(f,e,a){const t=U();await t.serverAvailable;const r=new URL(E(t.endpoint,"api/chart/geoip"),location.href),o=f.getTime(),d=e.getTime();return r.searchParams.append("startAt",o.toString()),r.searchParams.append("endAt",d.toString()),r.searchParams.append("bannedOnly",String(a)),fetch(r,{headers:B()}).then(v=>(t.assertResponseLogin(v),v.json()))}async function je(f,e,a){const t=U();await t.serverAvailable;const r=new URLSearchParams({startAt:f.getTime().toString(),endAt:e.getTime().toString(),type:a,field:"banAt"}),o=new URL(E(t.endpoint,"api/statistic/analysis/date?"+r.toString()),location.href);return fetch(o,{headers:B()}).then(d=>(t.assertResponseLogin(d),d.json()))}async function Ne(f,e){const a=U();await a.serverAvailable;const t=new URLSearchParams({startAt:f.getTime().toString(),endAt:e.getTime().toString()}),r=new URL(E(a.endpoint,"api/chart/trend?"+t.toString()),location.href);return fetch(r,{headers:B()}).then(o=>(a.assertResponseLogin(o),o.json()))}async function qe(f,e){const a=U();await a.serverAvailable;const t=new URLSearchParams({startAt:f.getTime().toString(),endAt:e.getTime().toString()}),r=new URL(E(a.endpoint,"api/chart/traffic?"+t.toString()),location.href);return fetch(r,{headers:B()}).then(o=>(a.assertResponseLogin(o),o.json()))}const We=V({__name:"banLine",setup(f){const{t:e}=A(),a=T(()=>({text:e("page.charts.loading"),color:t.isDark?"rgb(60, 126, 255)":"rgb(22, 93, 255)",textColor:t.isDark?"rgba(255, 255, 255, 0.9)":"rgb(29, 33, 41)",maskColor:t.isDark?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.4)"})),t=M();F([N,ue,re,q]);const r=i=>{i==="day"?o.range=[h().startOf("day").add(-7,"day").toDate(),new Date]:o.range=[h().startOf("hour").add(-6,"hour").toDate(),new Date]},o=W({timeStep:"day",range:[h().startOf("day").add(-7,"day").toDate(),new Date]}),d=z({xAxis:{type:"time",max:"dataMax"},yAxis:{type:"value"},tooltip:{trigger:"axis"},series:[{data:[],type:"line",name:e("page.charts.line.options.field")}]});G(o,i=>{p(i.range[0],i.range[1],i.timeStep)});const{loading:v,run:p}=X(je,{defaultParams:[h().startOf("day").add(-7,"day").toDate(),new Date,"day"],onSuccess:i=>{if(i.data){const c=new Map;for(let u=h(o.range[0]);u.isBefore(h(o.range[1]));u=u.add(1,o.timeStep))c.set(u.valueOf(),0);i.data.forEach(u=>{c.set(h(u.timestamp).startOf(o.timeStep).valueOf(),u.count)}),d.value.series[0].data=Array.from(c).sort(([u],[m])=>u-m).map(([u,m])=>[new Date(u),m])}}});return(i,c)=>{const u=J,m=$e,_=Pe,D=Y,k=te,S=H,C=K,L=I;return y(),x(L,{hoverable:"",title:s(e)("page.charts.title.line")},{extra:l(()=>[n(C,null,{content:l(()=>[n(S,{model:o},{default:l(()=>[n(D,{field:"timeStep",label:s(e)("page.charts.options.steps"),"label-col-flex":"100px"},{default:l(()=>[n(_,{modelValue:o.timeStep,"onUpdate:modelValue":c[0]||(c[0]=O=>o.timeStep=O),onChange:c[1]||(c[1]=O=>r(O))},{default:l(()=>[n(m,{value:"day"},{default:l(()=>[b(g(s(e)("page.charts.options.day")),1)]),_:1}),n(m,{value:"hour"},{default:l(()=>[b(g(s(e)("page.charts.options.hour")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),n(D,{field:"range",label:s(e)("page.charts.options.days"),"label-col-flex":"100px"},{default:l(()=>[n(k,{"show-time":"",modelValue:o.range,"onUpdate:modelValue":c[2]||(c[2]=O=>o.range=O),"value-format":"Date",shortcuts:o.timeStep==="day"?[{label:s(e)("page.charts.options.shortcut.7days"),value:()=>[s(h)().startOf("day").add(-7,"day").toDate(),new Date]},{label:s(e)("page.charts.options.shortcut.14days"),value:()=>[s(h)().startOf("day").add(-14,"day").toDate(),new Date]},{label:s(e)("page.charts.options.shortcut.30days"),value:()=>[s(h)().startOf("day").add(-30,"day").toDate(),new Date]}]:[{label:s(e)("page.charts.options.shortcut.6hours"),value:()=>[s(h)().startOf("hour").add(-6,"hour").toDate(),new Date]},{label:s(e)("page.charts.options.shortcut.12hours"),value:()=>[s(h)().startOf("hour").add(-12,"hour").toDate(),new Date]},{label:s(e)("page.charts.options.shortcut.24hours"),value:()=>[s(h)().startOf("hour").add(-24,"hour").toDate(),new Date]}]},null,8,["modelValue","shortcuts"])]),_:1},8,["label"])]),_:1},8,["model"])]),default:l(()=>[n(u,null,{default:l(()=>[b(g(s(e)("page.charts.options.more")),1)]),_:1})]),_:1})]),default:l(()=>[n(s(j),{class:"chart",option:d.value,loading:s(v),loadingOptions:a.value,theme:"ovilia-green",autoresize:"","init-options":{renderer:"svg"}},null,8,["option","loading","loadingOptions"])]),_:1},8,["title"])}}}),Ge=V({__name:"fieldPie",setup(f){const{t:e}=A();F([N,ie,pe,q]);const a=M(),t=W({field:"peerId",enableThreshold:!0,mergeSameVersion:!1}),r=T(()=>({text:e("page.charts.loading"),color:a.isDark?"rgb(60, 126, 255)":"rgb(22, 93, 255)",textColor:a.isDark?"rgba(255, 255, 255, 0.9)":"rgb(29, 33, 41)",maskColor:a.isDark?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.4)"})),o=z({tooltip:{trigger:"item",appendToBody:!0,formatter:'<p style="word-wrap:break-all"><b>{b}</b></p>  {c} ({d}%)'},legend:{orient:"vertical",left:"right",type:"scroll",right:10,top:20,bottom:20,data:[],textStyle:{overflow:"truncate",width:100},tooltip:{show:!0}},backgroundColor:a.isDark?"rgba(0, 0, 0, 0.0)":void 0,series:[{name:e("page.charts.options.field."+t.field),type:"pie",radius:"55%",center:["50%","60%"],data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]});G(t,p=>{v(p.field,p.enableThreshold)});const{loading:d,run:v}=X(Me,{defaultParams:["peerId",!0],onSuccess:p=>{if(p.data){const i=p.data.map(c=>(c.data===""&&(c.data=e("page.charts.options.field.empty")),c));if(t.mergeSameVersion&&t.field==="peerId"){const c=new Map;i.forEach(u=>{let m=u.data;const _=m.match(/^([-]?[a-zA-z]+)[0-9]+.*/);_&&(_==null?void 0:_.length)>=2&&(m=_[1]+"*"),c.has(m)?c.set(m,c.get(m)+u.count):c.set(m,u.count)}),o.value.legend.data=[],o.value.series[0].data=[],Array.from(c).forEach(([u,m])=>{o.value.legend.data.push(u),o.value.series[0].data.push({name:u,value:m})})}else o.value.legend.data=i.map(c=>c.data),o.value.series[0].data=i.map(c=>({name:c.data,value:c.count}))}}});return(p,i)=>{const c=J,u=he,m=fe,_=Y,D=_e,k=ge,S=ve,C=H,L=K,O=I;return y(),x(O,{hoverable:"",title:s(e)("page.charts.options.field."+t.field)},{extra:l(()=>[n(L,null,{content:l(()=>[n(C,{model:t,style:{width:"25vh"}},{default:l(()=>[n(_,{field:"field",label:s(e)("page.charts.options.field")},{default:l(()=>[n(m,{modelValue:t.field,"onUpdate:modelValue":i[0]||(i[0]=$=>t.field=$),"trigger-props":{autoFitPopupMinWidth:!0}},{default:l(()=>[n(u,{value:"peerId"},{default:l(()=>[b(g(s(e)("page.charts.options.field.peerId")),1)]),_:1}),n(u,{value:"torrentName"},{default:l(()=>[b(g(s(e)("page.charts.options.field.torrentName")),1)]),_:1}),n(u,{value:"module"},{default:l(()=>[b(g(s(e)("page.charts.options.field.module")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),n(_,{field:"enableThreshold"},{default:l(()=>[n(S,null,{default:l(()=>[n(D,{modelValue:t.enableThreshold,"onUpdate:modelValue":i[1]||(i[1]=$=>t.enableThreshold=$)},null,8,["modelValue"]),n(k,null,{default:l(()=>[b(g(s(e)("page.charts.options.thresold")),1)]),_:1})]),_:1})]),_:1}),t.field==="peerId"?(y(),x(_,{key:0,field:"mergeSameVersion"},{default:l(()=>[n(S,null,{default:l(()=>[n(D,{modelValue:t.mergeSameVersion,"onUpdate:modelValue":i[2]||(i[2]=$=>t.mergeSameVersion=$)},null,8,["modelValue"]),n(k,null,{default:l(()=>[b(g(s(e)("page.charts.options.mergeSame")),1)]),_:1})]),_:1})]),_:1})):ke("",!0)]),_:1},8,["model"])]),default:l(()=>[n(c,null,{default:l(()=>[b(g(s(e)("page.charts.options.more")),1)]),_:1})]),_:1})]),default:l(()=>[n(s(j),{class:"chart",option:o.value,loading:s(d),autoresize:"",loadingOptions:r.value,theme:s(a).isDark?"dark":"light","init-options":{renderer:"svg"}},null,8,["option","loading","loadingOptions","theme"])]),_:1},8,["title"])}}}),Xe=V({__name:"trends",setup(f){F([re,N,ue,q]);const{t:e}=A(),a=W({range:[h().startOf("day").add(-7,"day").toDate(),new Date]}),t=M(),r=T(()=>({text:e("page.charts.loading"),color:t.isDark?"rgb(60, 126, 255)":"rgb(22, 93, 255)",textColor:t.isDark?"rgba(255, 255, 255, 0.9)":"rgb(29, 33, 41)",maskColor:t.isDark?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.4)"})),o=z({xAxis:{type:"time",max:"dataMax"},yAxis:{type:"value"},tooltip:{trigger:"axis"},series:[{data:[],type:"line",color:"#A5A051",areaStyle:{color:"#A5A051"},name:e("page.charts.trends.options.peers")},{data:[],type:"line",color:"#DB4D6D",areaStyle:{color:"#DB4D6D"},name:e("page.charts.trends.options.bans")}]});G(a,p=>{v(p.range[0],p.range[1])});const{loading:d,run:v}=X(Ne,{defaultParams:[h().startOf("day").add(-7,"day").toDate(),new Date],onSuccess:p=>{p.data&&(o.value.series[0].data=p.data.connectedPeersTrend.sort((i,c)=>i.key-c.key).map(i=>[new Date(i.key),i.value]),o.value.series[1].data=p.data.bannedPeersTrend.sort((i,c)=>i.key-c.key).map(i=>[new Date(i.key),i.value]))}});return(p,i)=>{const c=J,u=te,m=Y,_=H,D=K,k=I;return y(),x(k,{hoverable:"",title:s(e)("page.charts.title.trends")},{extra:l(()=>[n(D,null,{content:l(()=>[n(_,{model:a},{default:l(()=>[n(m,{field:"range",label:s(e)("page.charts.options.days"),"label-col-flex":"100px"},{default:l(()=>[n(u,{"show-time":"",modelValue:a.range,"onUpdate:modelValue":i[0]||(i[0]=S=>a.range=S),"value-format":"Date",shortcuts:[{label:s(e)("page.charts.options.shortcut.7days"),value:()=>[s(h)().startOf("day").add(-7,"day").toDate(),new Date]},{label:s(e)("page.charts.options.shortcut.14days"),value:()=>[s(h)().startOf("day").add(-14,"day").toDate(),new Date]},{label:s(e)("page.charts.options.shortcut.30days"),value:()=>[s(h)().startOf("day").add(-30,"day").toDate(),new Date]}]},null,8,["modelValue","shortcuts"])]),_:1},8,["label"])]),_:1},8,["model"])]),default:l(()=>[n(c,null,{default:l(()=>[b(g(s(e)("page.charts.options.more")),1)]),_:1})]),_:1})]),default:l(()=>[n(s(j),{class:"chart",option:o.value,loading:s(d),loadingOptions:r.value,theme:"ovilia-green",autoresize:"","init-options":{renderer:"svg"}},null,8,["option","loading","loadingOptions"])]),_:1},8,["title"])}}}),Je=V({__name:"traffic",setup(f){F([N,ie,De,re,xe,q]);const e=W({range:[h().startOf("day").add(-7,"day").toDate(),new Date]}),a=M(),t=T(()=>({text:r("page.charts.loading"),color:a.isDark?"rgb(60, 126, 255)":"rgb(22, 93, 255)",textColor:a.isDark?"rgba(255, 255, 255, 0.9)":"rgb(29, 33, 41)",maskColor:a.isDark?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.4)"})),{t:r,d:o}=A(),d=z({tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(i){var c;return((c=i[0])==null?void 0:c.name)+":<br/>"+i.map(u=>`${u.marker} ${u.seriesName}: ${de(u.value)}`).join("<br>")}},legend:{data:[r("page.charts.traffic.options.download"),r("page.charts.traffic.options.upload")]},xAxis:[{type:"category",axisTick:{show:!1},data:[]}],yAxis:[{type:"log",logBase:10,min:1,axisLabel:{formatter:i=>i===1?"0":de(i)}}],series:[{name:r("page.charts.traffic.options.download"),type:"bar",barGap:0,emphasis:{focus:"series"},data:[]},{name:r("page.charts.traffic.options.upload"),type:"bar",emphasis:{focus:"series"},data:[]}]});G(e,i=>{p(i.range[0],i.range[1])});const{loading:v,run:p}=X(qe,{defaultParams:[h().startOf("day").add(-7,"day").toDate(),new Date],onSuccess:i=>{i.data&&(d.value.xAxis[0].data.splice(0),d.value.series[0].data.splice(0),d.value.series[1].data.splice(0),i.data.journal.forEach(c=>{d.value.xAxis[0].data.push(o(new Date(c.timestamp),"short")),d.value.series[0].data.push(c.downloaded),d.value.series[1].data.push(c.uploaded)}))}});return(i,c)=>{const u=J,m=te,_=Y,D=H,k=ye,S=be,C=K,L=I;return y(),x(L,{hoverable:"",title:s(r)("page.charts.title.traffic")},{extra:l(()=>[n(C,null,{content:l(()=>[n(D,{model:e},{default:l(()=>[n(_,{field:"range",label:s(r)("page.charts.options.days"),"label-col-flex":"100px"},{default:l(()=>[n(m,{"show-time":"",modelValue:e.range,"onUpdate:modelValue":c[0]||(c[0]=O=>e.range=O),"value-format":"Date",shortcuts:[{label:s(r)("page.charts.options.shortcut.7days"),value:()=>[s(h)().startOf("day").add(-7,"day").toDate(),new Date]},{label:s(r)("page.charts.options.shortcut.14days"),value:()=>[s(h)().startOf("day").add(-14,"day").toDate(),new Date]},{label:s(r)("page.charts.options.shortcut.30days"),value:()=>[s(h)().startOf("day").add(-30,"day").toDate(),new Date]}]},null,8,["modelValue","shortcuts"])]),_:1},8,["label"])]),_:1},8,["model"])]),default:l(()=>[n(u,null,{default:l(()=>[b(g(s(r)("page.charts.options.more")),1)]),_:1}),n(S,{content:s(r)("page.charts.tooltip.traffic")},{default:l(()=>[n(k)]),_:1},8,["content"])]),_:1})]),default:l(()=>[n(s(j),{class:"chart",option:d.value,loading:s(v),loadingOptions:t.value,theme:"ovilia-green",autoresize:"","init-options":{renderer:"svg"}},null,8,["option","loading","loadingOptions"])]),_:1},8,["title"])}}}),Ye=V({__name:"plusWarpper",props:{title:{}},setup(f){const e=Oe(()=>we(()=>import("./dummyChart-Cl9kqvqv.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),{t:a}=A(),t=U(),r=T(()=>t.plusStatus),o=()=>{t.emmitter.emit("open-plus-modal")};return(d,v)=>{var m;const p=Be,i=Ie,c=Ue,u=I;return(m=r.value)!=null&&m.activated?Se(d.$slots,"default",{key:0},void 0,!0):(y(),x(u,{key:1,hoverable:"",title:d.title},{default:l(()=>[n(c,{class:"overlay",status:"warning",title:s(a)("page.charts.locked")},{icon:l(()=>[n(p)]),subtitle:l(()=>[b(g(s(a)("page.charts.locked.tips")),1)]),extra:l(()=>[n(i,{type:"primary",onClick:o},{default:l(()=>[b(g(s(a)("page.charts.locked.active")),1)]),_:1})]),_:1},8,["title"]),n(s(e))]),_:1},8,["title"]))}}}),se=le(Ye,[["__scopeId","data-v-fa9c84e8"]]),He={},Ke={class:"cell"};function Qe(f,e){return y(),R("span",Ke,g(""))}const Ze=le(He,[["render",Qe]]),et=V({__name:"TileView",props:{tile:{}},setup(f){const e=f,{tile:a}=me(e),t=T(()=>{var r=["tile"];return r.push("tile"+a.value.value),a.value.mergedInto||r.push("position_"+a.value.row+"_"+a.value.column),a.value.mergedInto&&r.push("merged"),a.value.isNew()&&r.push("new"),a.value.hasMoved()&&(r.push("row_from_"+a.value.fromRow()+"_to_"+a.value.toRow()),r.push("column_from_"+a.value.fromColumn()+"_to_"+a.value.toColumn()),r.push("isMoving")),r.join(" ")});return(r,o)=>(y(),R("span",{class:Ve(t.value)},g(s(a).value),3))}}),tt={class:"overlay"},at={class:"message"},ot=V({__name:"GameEndOverlay",props:{board:{},onrestart:{type:Function}},setup(f){const e=f,{board:a}=me(e),t=T(()=>a.value.hasWon()||a.value.hasLost()),r=T(()=>a.value.hasWon()?"Good Job!":a.value.hasLost()?"Game Over":""),o=()=>{e.onrestart&&e.onrestart()};return(d,v)=>Te((y(),R("div",tt,[ce("p",at,g(r.value),1),ce("button",{class:"tryAgain",onClick:o},"Try again")],512)),[[Ce,t.value]])}}),ee=class ee{constructor(e,a,t){this.value=e||0,this.row=a||-1,this.column=t||-1,this.oldRow=-1,this.oldColumn=-1,this.markForDeletion=!1,this.mergedInto=null,this.id=ee.id++}moveTo(e,a){this.oldRow=this.row,this.oldColumn=this.column,this.row=e,this.column=a}isNew(){return this.oldRow===-1&&!this.mergedInto}hasMoved(){return this.fromRow()!==-1&&(this.fromRow()!==this.toRow()||this.fromColumn()!==this.toColumn())||this.mergedInto!==null}fromRow(){return this.mergedInto?this.row:this.oldRow}fromColumn(){return this.mergedInto?this.column:this.oldColumn}toRow(){return this.mergedInto?this.mergedInto.row:this.row}toColumn(){return this.mergedInto?this.mergedInto.column:this.column}};ee.id=0;let ne=ee;const w=class w{constructor(){this.tiles=[],this.cells=[];for(let e=0;e<w.size;++e)this.cells[e]=[this.addTile(),this.addTile(),this.addTile(),this.addTile()];this.addRandomTile(),this.setPositions(),this.won=!1}addTile(e){const a=new ne(e);return this.tiles.push(a),a}moveLeft(){let e=!1;for(let a=0;a<w.size;++a){const t=this.cells[a].filter(o=>o.value!=0),r=[];for(let o=0;o<w.size;++o){let d=t.length>0?t.shift():this.addTile();if(t.length>0&&t[0].value===d.value){const v=d;d=this.addTile(d.value),v.mergedInto=d;const p=t.shift();p.mergedInto=d,d.value+=p.value}r[o]=d,this.won=this.won||d.value===2048,e=e||d.value!==this.cells[a][o].value}this.cells[a]=r}return e}setPositions(){this.cells.forEach((e,a)=>{e.forEach((t,r)=>{t.oldRow=t.row,t.oldColumn=t.column,t.row=a,t.column=r,t.markForDeletion=!1})})}addRandomTile(){const e=[];for(let o=0;o<w.size;++o)for(let d=0;d<w.size;++d)this.cells[o][d].value===0&&e.push({r:o,c:d});const a=Math.floor(Math.random()*e.length),t=e[a],r=Math.random()<w.fourProbability?4:2;this.cells[t.r][t.c]=this.addTile(r)}move(e){this.clearOldTiles();for(let t=0;t<e;++t)this.cells=this.rotateLeft(this.cells);const a=this.moveLeft();for(let t=e;t<4;++t)this.cells=this.rotateLeft(this.cells);return a&&this.addRandomTile(),this.setPositions(),this}clearOldTiles(){this.tiles=this.tiles.filter(e=>!e.markForDeletion),this.tiles.forEach(e=>e.markForDeletion=!0)}hasWon(){return this.won}hasLost(){let e=!1;for(let a=0;a<w.size;++a)for(let t=0;t<w.size;++t){e=e||this.cells[a][t].value===0;for(let r=0;r<4;++r){const o=a+w.deltaX[r],d=t+w.deltaY[r];o<0||o>=w.size||d<0||d>=w.size||(e=e||this.cells[a][t].value===this.cells[o][d].value)}}return!e}rotateLeft(e){const a=e.length,t=e[0].length,r=[];for(let o=0;o<a;++o){r.push([]);for(let d=0;d<t;++d)r[o][d]=e[d][t-o-1]}return r}};w.size=4,w.fourProbability=.1,w.deltaX=[-1,0,1,0],w.deltaY=[0,-1,0,1];let Q=w;const st={class:"board",tabIndex:"1"},nt=V({__name:"BoardView",setup(f){const e=z(new Q),a=o=>{if(!e.value.hasWon()&&o.keyCode>=37&&o.keyCode<=40){o.preventDefault();var d=o.keyCode-37;e.value.move(d)}},t=()=>{e.value=new Q};Re(()=>{window.addEventListener("keydown",a)}),Ae(()=>{window.removeEventListener("keydown",a)});const r=T(()=>e.value.tiles.filter(o=>o.value!=0));return(o,d)=>(y(),R("div",st,[(y(!0),R(ae,null,oe(e.value.cells,(v,p)=>(y(),R("div",{key:p},[(y(!0),R(ae,null,oe(v,(i,c)=>(y(),x(Ze,{key:c}))),128))]))),128)),(y(!0),R(ae,null,oe(r.value,(v,p)=>(y(),x(et,{tile:v,key:p},null,8,["tile"]))),128)),n(ot,{board:e.value,onrestart:t},null,8,["board"])]))}}),lt={name:"vue-2048",components:{BoardView:nt}};function rt(f,e,a,t,r,o){const d=Le("BoardView");return y(),x(d,{style:{margin:"0 auto"}})}const Z=le(lt,[["render",rt]]),it=f=>{f.component(Z.name,Z)};Z.install=it;const dt=V({__name:"index",setup(f){const{t:e}=A();return(a,t)=>{const r=ye,o=be,d=I;return y(),x(d,{hoverable:"",title:"2048"},{extra:l(()=>[n(o,{content:s(e)("page.charts.tooltip.2048")},{default:l(()=>[n(r)]),_:1},8,["content"])]),default:l(()=>[n(s(Z),{style:{margin:"0 auto"}})]),_:1})}}}),ct=V({__name:"ispPie",setup(f){const{t:e}=A();F([N,ie,pe,q]);const a=M(),t=W({field:"isp",enableThreshold:!0,bannedOnly:!0,range:[h().startOf("day").add(-7,"day").toDate(),new Date]}),r=T(()=>({text:e("page.charts.loading"),color:a.isDark?"rgb(60, 126, 255)":"rgb(22, 93, 255)",textColor:a.isDark?"rgba(255, 255, 255, 0.9)":"rgb(29, 33, 41)",maskColor:a.isDark?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.4)"})),o=z({tooltip:{trigger:"item",appendToBody:!0,formatter:'<p style="word-wrap:break-all"><b>{b}</b></p>  {c} ({d}%)'},legend:{orient:"vertical",left:"right",type:"scroll",right:10,top:20,bottom:20,data:[],textStyle:{overflow:"truncate",width:100},tooltip:{show:!0}},backgroundColor:a.isDark?"rgba(0, 0, 0, 0.0)":void 0,series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]});G(t,p=>{v(p.range[0],p.range[1],t.bannedOnly)});const{loading:d,run:v}=X(Fe,{defaultParams:[h().startOf("day").add(-7,"day").toDate(),new Date,t.bannedOnly],onSuccess:p=>{if(p.data){const i=p.data[t.field];let c;if(t.enableThreshold){const m=i.reduce((_,D)=>_+D.value,0)*.01;c=i.filter(_=>_.value>=m)}else c=i;o.value.legend.data=c.map(u=>u.key),o.value.series[0].data=c.map(u=>({name:u.key==="N/A"&&t.field==="province"?e("page.charts.data.province.na"):u.key,value:u.value})),o.value.series[0].name=e("page.charts.options.field."+t.field)}}});return(p,i)=>{const c=J,u=he,m=fe,_=Y,D=te,k=_e,S=ge,C=ve,L=H,O=K,$=I;return y(),x($,{hoverable:"",title:s(e)("page.charts.title.geoip")+(t.bannedOnly?s(e)("page.charts.subtitle.bannedOnly"):"")},{extra:l(()=>[n(O,null,{content:l(()=>[n(L,{model:t},{default:l(()=>[n(_,{field:"field",label:s(e)("page.charts.options.field")},{default:l(()=>[n(m,{modelValue:t.field,"onUpdate:modelValue":i[0]||(i[0]=P=>t.field=P),"trigger-props":{autoFitPopupMinWidth:!0}},{default:l(()=>[n(u,{value:"isp"},{default:l(()=>[b(g(s(e)("page.charts.options.field.isp")),1)]),_:1}),n(u,{value:"province"},{default:l(()=>[b(g(s(e)("page.charts.options.field.province")),1)]),_:1}),n(u,{value:"city"},{default:l(()=>[b(g(s(e)("page.charts.options.field.city")),1)]),_:1}),n(u,{value:"region"},{default:l(()=>[b(g(s(e)("page.charts.options.field.region")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),n(_,{field:"range",label:s(e)("page.charts.options.days"),"label-col-flex":"100px"},{default:l(()=>[n(D,{"show-time":"",modelValue:t.range,"onUpdate:modelValue":i[1]||(i[1]=P=>t.range=P),"value-format":"Date",shortcuts:[{label:s(e)("page.charts.options.shortcut.7days"),value:()=>[s(h)().startOf("day").add(-7,"day").toDate(),new Date]},{label:s(e)("page.charts.options.shortcut.14days"),value:()=>[s(h)().startOf("day").add(-14,"day").toDate(),new Date]},{label:s(e)("page.charts.options.shortcut.30days"),value:()=>[s(h)().startOf("day").add(-30,"day").toDate(),new Date]}]},null,8,["modelValue","shortcuts"])]),_:1},8,["label"]),n(_,{field:"enableThreshold"},{default:l(()=>[n(C,null,{default:l(()=>[n(k,{modelValue:t.enableThreshold,"onUpdate:modelValue":i[2]||(i[2]=P=>t.enableThreshold=P)},null,8,["modelValue"]),n(S,null,{default:l(()=>[b(g(s(e)("page.charts.options.thresold")),1)]),_:1})]),_:1})]),_:1}),n(_,{field:"bannedOnly"},{default:l(()=>[n(C,null,{default:l(()=>[n(k,{modelValue:t.bannedOnly,"onUpdate:modelValue":i[3]||(i[3]=P=>t.bannedOnly=P)},null,8,["modelValue"]),n(S,null,{default:l(()=>[b(g(s(e)("page.charts.options.bannedOnly")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),default:l(()=>[n(c,null,{default:l(()=>[b(g(s(e)("page.charts.options.more")),1)]),_:1})]),_:1})]),default:l(()=>[n(s(j),{class:"chart",option:o.value,loading:s(d),autoresize:"",loadingOptions:r.value,theme:s(a).isDark?"dark":"light","init-options":{renderer:"svg"}},null,8,["option","loading","loadingOptions","theme"])]),_:1},8,["title"])}}}),_t=V({__name:"index",setup(f){const{t:e}=A();return(a,t)=>{const r=Ee,o=ze;return y(),x(o,{justify:"center",align:"stretch",wrap:!0,gutter:[{xs:12,sm:12,md:12,lg:12,xl:24},{xs:12,sm:12,md:12,lg:12,xl:24}]},{default:l(()=>[n(r,{xl:12,lg:24,md:24,sm:24,xs:24},{default:l(()=>[n(We)]),_:1}),n(r,{xl:12,lg:24,md:24,sm:24,xs:24},{default:l(()=>[n(Ge)]),_:1}),n(r,{xl:12,lg:24,md:24,sm:24,xs:24},{default:l(()=>[n(se,{title:s(e)("page.charts.title.trends")},{default:l(()=>[n(Xe)]),_:1},8,["title"])]),_:1}),n(r,{xl:12,lg:24,md:24,sm:24,xs:24},{default:l(()=>[n(se,{title:s(e)("page.charts.title.traffic")},{default:l(()=>[n(Je)]),_:1},8,["title"])]),_:1}),n(r,{xl:12,lg:24,md:24,sm:24,xs:24},{default:l(()=>[n(se,{title:s(e)("page.charts.title.geoip")},{default:l(()=>[n(ct)]),_:1},8,["title"])]),_:1}),n(r,{xl:12,lg:24,md:24,sm:24,xs:24},{default:l(()=>[n(dt)]),_:1})]),_:1})}}});export{_t as default};
