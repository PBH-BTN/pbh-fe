import{f as q,h as z,i as _,I as U,j as $,k as E,c as G}from"./index-LAUIWOTO.js";import{e as H,a6 as J,r as m,a7 as K,h as c,q as h,C as a,y as d,N as l,a2 as n,v as t,s as N,m as Q,j as k,F as W,O as X}from"./libs-C0Hl_kMH.js";import{T as Y,S as Z,P as ee,e as ae,a as te,M as se}from"./arcoDesign-BwLR66Jx.js";const oe=H({__name:"peerListModal",setup(le,{expose:C}){const{t:o}=J(),u=m(!1),f=m(""),g=m(""),w=m("");C({showModal:(p,s,r)=>{f.value=p,g.value=s,w.value=r,u.value=!0,F(p,s)}});const D=()=>{u.value=!1,f.value="",g.value=""},{data:v,loading:T,run:F,cancel:M}=K(q,{defaultParams:[f.value,g.value],manual:!0,pollingInterval:1e3}),P=[{title:()=>o("page.dashboard.peerList.column.address"),slotName:"peerAddress",width:400},{title:()=>o("page.dashboard.peerList.column.port"),dataIndex:"peer.address.port",width:100},{title:()=>o("page.dashboard.peerList.column.flag"),slotName:"flags",width:100},{title:"Peer ID",dataIndex:"peer.id",width:100},{title:()=>o("page.dashboard.peerList.column.clientName"),dataIndex:"peer.clientName",width:400},{title:()=>o("page.dashboard.peerList.column.speed"),slotName:"speed",width:100},{title:()=>o("page.dashboard.peerList.column.uploadedDownloaded"),slotName:"uploadDownload",width:100},{title:()=>o("page.dashboard.peerList.column.progress"),slotName:"progress",width:100}],j=p=>p.split(" ").map(s=>s+" - "+o("page.dashboard.peerList.column.flags."+s.trim()));return(p,s)=>{const r=Y,b=U,y=$,i=Z,A=ee,B=E,V=ae,O=te,R=se;return c(),h(R,{"hide-cancel":"",closable:"",visible:u.value,"onUpdate:visible":s[0]||(s[0]=e=>u.value=e),onOk:D,fullscreen:"",width:"auto",onClose:s[1]||(s[1]=e=>n(M)())},{title:a(()=>[d(l(n(o)("page.dashboard.peerList.title")+w.value),1)]),default:a(()=>[t(O,{columns:P,data:n(v),loading:!n(T)&&!n(v),"virtual-list-props":{height:850},pagination:!1},{peerAddress:a(({record:e})=>[t(r,{copyable:"",code:""},{default:a(()=>[e.geo&&e.geo.countryRegion?(c(),h(z,{key:0,iso:e.geo.countryRegion},null,8,["iso"])):N("",!0),d(" "+l(e.peer.address.ip),1)]),_:2},1024)]),speed:a(({record:e})=>[t(i,{fill:"",style:{"justify-content":"space-between"}},{default:a(()=>[t(i,{fill:"",direction:"vertical"},{default:a(()=>[t(r,null,{default:a(()=>[t(b,{class:"green"}),d(" "+l(n(_)(e.peer.uploadSpeed))+"/s ",1)]),_:2},1024),t(r,null,{default:a(()=>[t(y,{class:"red"}),d(" "+l(n(_)(e.peer.downloadSpeed))+"/s ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),uploadDownload:a(({record:e})=>[t(i,{fill:"",style:{"justify-content":"space-between"}},{default:a(()=>[t(i,{fill:"",direction:"vertical"},{default:a(()=>[t(r,null,{default:a(()=>[t(b,{class:"green"}),d(" "+l(n(_)(e.peer.uploaded)),1)]),_:2},1024),t(r,null,{default:a(()=>[t(y,{class:"red"}),d(" "+l(n(_)(e.peer.downloaded)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),progress:a(({record:e})=>[t(i,null,{default:a(()=>[t(A,{percent:e.peer.progress,size:"mini"},null,8,["percent"]),t(r,null,{default:a(()=>[d(l((e.peer.progress*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1024)]),flags:a(({record:e})=>{var x,L;return[Q("p",null,[d(l((x=e.peer.flags)==null?void 0:x.ltStdString)+" ",1),(L=e.peer.flags)!=null&&L.ltStdString?(c(),h(V,{key:0},{content:a(()=>{var S;return[(c(!0),k(W,null,X(j((S=e.peer.flags)==null?void 0:S.ltStdString),I=>(c(),k("p",{key:I},l(I),1))),128))]}),default:a(()=>[t(B)]),_:2},1024)):N("",!0)])]}),_:1},8,["data","loading"])]),_:1},8,["visible"])}}}),pe=G(oe,[["__scopeId","data-v-abdb3c10"]]);export{pe as default};
