import{f as U,h as $,i as m,I as q,j as E,k as G,c as H}from"./index-okGCfjWd.js";import{f as J,a6 as K,r as f,a7 as Q,j as u,s as w,D as e,z as d,O as l,a2 as n,x as a,t as N,p as W,k as D,F as X,P as Y}from"./libs-CPdh8xC_.js";import{T as Z,S as ee,k as ae,p as te,m as se,f as oe}from"./arcoDesign-CD4eothr.js";const le=J({__name:"peerListModal",setup(ne,{expose:T}){const{t:o}=K(),_=f(!1),g=f(""),h=f(""),v=f("");T({showModal:(p,s,r)=>{g.value=p,h.value=s,v.value=r,_.value=!0,P(p,s)}});const C=()=>{_.value=!1,g.value="",h.value=""},{data:b,loading:F,run:P,cancel:j}=Q(U,{defaultParams:[g.value,h.value],manual:!0,pollingInterval:1e3}),A=[{title:()=>o("page.dashboard.peerList.column.address"),slotName:"peerAddress",width:400},{title:()=>o("page.dashboard.peerList.column.port"),dataIndex:"peer.address.port",width:100},{title:()=>o("page.dashboard.peerList.column.flag"),slotName:"flags",width:100},{title:"Peer ID",dataIndex:"peer.id",width:100},{title:()=>o("page.dashboard.peerList.column.clientName"),dataIndex:"peer.clientName",width:400},{title:()=>o("page.dashboard.peerList.column.speed"),slotName:"speed",width:100},{title:()=>o("page.dashboard.peerList.column.uploadedDownloaded"),slotName:"uploadDownload",width:100},{title:()=>o("page.dashboard.peerList.column.progress"),slotName:"progress",width:100}],B=p=>p.split(" ").map(s=>s+" - "+o("page.dashboard.peerList.column.flags."+s.trim()));return(p,s)=>{const r=Z,y=q,x=E,i=ee,M=ae,V=G,z=te,O=se,R=oe;return u(),w(R,{"hide-cancel":"",closable:"",visible:_.value,"onUpdate:visible":s[0]||(s[0]=c=>_.value=c),onOk:C,fullscreen:"",width:"auto",onClose:s[1]||(s[1]=c=>n(j)())},{title:e(()=>[d(l(n(o)("page.dashboard.peerList.title")+v.value),1)]),default:e(()=>{var c;return[a(O,{columns:A,data:(c=n(b))==null?void 0:c.data,loading:!n(F)&&!n(b),"virtual-list-props":{height:850},pagination:!1},{peerAddress:e(({record:t})=>[a(r,{copyable:"",code:""},{default:e(()=>[t.geo&&t.geo.countryRegion?(u(),w($,{key:0,iso:t.geo.countryRegion},null,8,["iso"])):N("",!0),d(" "+l(t.peer.address.ip),1)]),_:2},1024)]),speed:e(({record:t})=>[a(i,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[a(i,{fill:"",direction:"vertical"},{default:e(()=>[a(r,null,{default:e(()=>[a(y,{class:"green"}),d(" "+l(n(m)(t.peer.uploadSpeed))+"/s ",1)]),_:2},1024),a(r,null,{default:e(()=>[a(x,{class:"red"}),d(" "+l(n(m)(t.peer.downloadSpeed))+"/s ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),uploadDownload:e(({record:t})=>[a(i,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[a(i,{fill:"",direction:"vertical"},{default:e(()=>[a(r,null,{default:e(()=>[a(y,{class:"green"}),d(" "+l(n(m)(t.peer.uploaded)),1)]),_:2},1024),a(r,null,{default:e(()=>[a(x,{class:"red"}),d(" "+l(n(m)(t.peer.downloaded)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),progress:e(({record:t})=>[a(i,null,{default:e(()=>[a(M,{percent:t.peer.progress,size:"mini"},null,8,["percent"]),a(r,null,{default:e(()=>[d(l((t.peer.progress*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1024)]),flags:e(({record:t})=>{var L,S;return[W("p",null,[d(l((L=t.peer.flags)==null?void 0:L.ltStdString)+" ",1),(S=t.peer.flags)!=null&&S.ltStdString?(u(),w(z,{key:0},{content:e(()=>{var k;return[(u(!0),D(X,null,Y(B((k=t.peer.flags)==null?void 0:k.ltStdString),I=>(u(),D("p",{key:I},l(I),1))),128))]}),default:e(()=>[a(V)]),_:2},1024)):N("",!0)])]}),_:1},8,["data","loading"])]}),_:1},8,["visible"])}}}),ie=H(le,[["__scopeId","data-v-b5cd9d9e"]]);export{ie as default};
