import{d as I,e as U}from"./index-CCTHNf-3.js";import{e as P,a6 as O,r as T,c as f,ad as k,w as K,h as B,q as D,C as t,v as l,a2 as a,y as i,N as d}from"./libs-tLzij8UM.js";import{m as V,T as q,a as G,M as j}from"./arcoDesign-DCmKwCeN.js";var n=(u=>(u.AUTO="AUTO",u.MANUAL="MANUAL",u))(n||{});const J=P({__name:"logModal",setup(u,{expose:y}){const{t:o,d:v}=O(),s=T(!1);y({showModal:()=>{s.value=!0}});const S=[{title:"ID",slotName:"ruleId"},{title:()=>o("page.ruleSubscribe.updateLog.updateTime"),slotName:"updateTime"},{title:()=>o("page.ruleSubscribe.updateLog.ruleCount"),dataIndex:"count"},{title:()=>o("page.ruleSubscribe.updateLog.updateType"),slotName:"updateType"}],p=T(!0),L={[n.MANUAL]:"page.ruleSubscribe.updateLog.updateType.manual",[n.AUTO]:"page.ruleSubscribe.updateLog.updateType.auto"},h=f(()=>p.value||x.value||!m.value),{data:A,total:w,current:g,loading:x,pageSize:c,changeCurrent:M}=k(I,{defaultParams:[{pageIndex:1,pageSize:5}],pagination:{currentKey:"pageIndex",pageSizeKey:"pageSize",totalKey:"total"},onAfter:()=>{p.value=!1}});K([c,g],()=>{p.value=!0});const m=f(()=>{var r;return(r=A.value)==null?void 0:r.results});return(r,b)=>{const _=V,N=q,z=G,C=j;return B(),D(C,{visible:s.value,"onUpdate:visible":b[0]||(b[0]=e=>s.value=e),title:a(o)("page.ruleSubscribe.updateLog"),unmountOnClose:"",width:"auto","modal-style":{width:"35vw"}},{default:t(()=>[l(z,{stripe:!0,columns:S,data:m.value,loading:h.value,pagination:{total:a(w),current:a(g),pageSize:a(c),showPageSize:!0,baseSize:4,bufferSize:1},size:"medium",onPageChange:a(M),class:"banlog-table"},{ruleId:t(({record:e})=>[l(_,{color:a(U)(e.ruleId)},{default:t(()=>[i(d(e.ruleId),1)]),_:2},1032,["color"])]),updateTime:t(({record:e})=>[l(N,null,{default:t(()=>[i(d(a(v)(e.updateTime,"long")),1)]),_:2},1024)]),updateType:t(({record:e})=>[l(_,{color:e.updateType===a(n).MANUAL?"green":"blue"},{default:t(()=>[i(d(a(o)(L[e.updateType]??"page.ruleSubscribe.updateLog.updateType.unknown")),1)]),_:2},1032,["color"])]),_:1},8,["data","loading","pagination","onPageChange"])]),_:1},8,["visible","title"])}}});export{J as default};
