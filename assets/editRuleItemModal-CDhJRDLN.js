import{U as M,A as V,p as x}from"./index-ZTl16mvg.js";import{e as R,a6 as S,r as c,a as k,h as y,q as C,C as u,v as t,y as h,N as q,a2 as i}from"./libs-CfNwz28r.js";import{b,t as B,F,aj as O,u as A,M as D}from"./arcoDesign-COq-vaMw.js";const z=R({__name:"editRuleItemModal",setup(E,{expose:_}){const{t:s}=S(),m=c(!1),d=c(!1),e=k({ruleId:"",ruleName:"",subUrl:""}),U={ruleId:[{required:!0}],ruleName:[{required:!0,message:s("page.ruleSubscribe.editModal.form.name.required")}],subUrl:[{type:"url",required:!0}]};let n;_({showModal:(o,a,l)=>{d.value=o,n=a,!o&&l?(e.ruleId=l.ruleId,e.ruleName=l.ruleName,e.subUrl=l.subUrl):(e.ruleId=Math.random().toString(36).slice(2,10),e.ruleName="",e.subUrl=""),m.value=!0}});const p=c(),v=async()=>{var a;if(await((a=p.value)==null?void 0:a.validate()))return!1;if(d.value){const l=await V(e);return l.code!==201?(b.error(l.message),!0):(n&&n(e),!0)}else{const l=await M(e);return l.code!==200?(b.error(l.message),!0):(n&&n(e),!0)}},g=o=>{if(!e.ruleName)try{const a=new URL(o),l=x.parse(a.pathname).name;e.ruleName=l}catch{}};return(o,a)=>{const l=B,f=F,w=O,N=A,I=D;return y(),C(I,{visible:m.value,"onUpdate:visible":a[3]||(a[3]=r=>m.value=r),title:d.value?i(s)("page.ruleSubscribe.editModal.title.new"):i(s)("page.ruleSubscribe.editModal.title"),unmountOnClose:"",onBeforeOk:v},{default:u(()=>[t(N,{ref_key:"formRef",ref:p,model:e,rules:U},{default:u(()=>[t(f,{field:"ruleId",label:"ID"},{extra:u(()=>[h(q(i(s)("page.ruleSubscribe.editModal.form.id.extra")),1)]),default:u(()=>[t(l,{modelValue:e.ruleId,"onUpdate:modelValue":a[0]||(a[0]=r=>e.ruleId=r),disabled:!d.value,"allow-clear":""},null,8,["modelValue","disabled"])]),_:1}),t(f,{field:"ruleName",label:i(s)("page.ruleSubscribe.editModal.form.name")},{default:u(()=>[t(l,{modelValue:e.ruleName,"onUpdate:modelValue":a[1]||(a[1]=r=>e.ruleName=r),"allow-clear":""},null,8,["modelValue"])]),_:1},8,["label"]),t(f,{field:"subUrl",label:"URL"},{default:u(()=>[t(w,{modelValue:e.subUrl,"onUpdate:modelValue":a[2]||(a[2]=r=>e.subUrl=r),"allow-clear":"",onChange:g,"auto-size":{minRows:2,maxRows:5}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])}}});export{z as default};
