import{c as j,d as O,f as _,I as R,e as q,h as z,_ as U}from"./index-uHmIFCE0.js";import{e as $,a6 as E,r as m,a7 as G,h as c,q as h,C as a,y as d,N as l,a2 as n,v as t,s as L,m as H,j as I,F as J,O as K}from"./libs-Du3C3Xh-.js";import{T as Q,S as W,P as X,m as Y,a as Z,M as ee}from"./arcoDesign-HsKCA9Oj.js";const ae=$({__name:"peerListModal",setup(te,{expose:N}){const{t:o}=E(),u=m(!1),f=m(""),g=m(""),w=m("");N({showModal:(p,s,r)=>{f.value=p,g.value=s,w.value=r,u.value=!0,D(p,s)}});const k=()=>{u.value=!1,f.value="",g.value=""},{data:v,loading:C,run:D,cancel:S}=G(j,{defaultParams:[f.value,g.value],manual:!0,pollingInterval:1e3}),T=[{title:()=>o("page.dashboard.peerList.column.address"),slotName:"peerAddress",width:400},{title:()=>o("page.dashboard.peerList.column.port"),dataIndex:"peer.address.port",width:100},{title:()=>o("page.dashboard.peerList.column.flag"),slotName:"flags",width:100},{title:"Peer ID",dataIndex:"peer.id",width:100},{title:()=>o("page.dashboard.peerList.column.clientName"),dataIndex:"peer.clientName",width:400},{title:()=>o("page.dashboard.peerList.column.speed"),slotName:"speed",width:100},{title:()=>o("page.dashboard.peerList.column.uploadedDownloaded"),slotName:"uploadDownload",width:100},{title:()=>o("page.dashboard.peerList.column.progress"),slotName:"progress",width:100}],F=p=>p.split(" ").map(s=>s+" - "+o("page.dashboard.peerList.column.flags."+s.trim()));return(p,s)=>{const r=Q,b=R,y=q,i=W,M=X,P=z,A=Y,B=Z,V=ee;return c(),h(V,{"hide-cancel":"",closable:"",visible:u.value,"onUpdate:visible":s[0]||(s[0]=e=>u.value=e),onOk:k,fullscreen:"",width:"auto",onClose:s[1]||(s[1]=e=>n(S)())},{title:a(()=>[d(l(n(o)("page.dashboard.peerList.title")+w.value),1)]),default:a(()=>[t(B,{columns:T,data:n(v),loading:!n(C)&&!n(v),"virtual-list-props":{height:850},pagination:!1},{peerAddress:a(({record:e})=>[t(r,{copyable:"",code:""},{default:a(()=>[e.geo&&e.geo.countryRegion?(c(),h(O,{key:0,iso:e.geo.countryRegion},null,8,["iso"])):L("",!0),d(" "+l(e.peer.address.ip),1)]),_:2},1024)]),speed:a(({record:e})=>[t(i,{fill:"",style:{"justify-content":"space-between"}},{default:a(()=>[t(i,{fill:"",direction:"vertical"},{default:a(()=>[t(r,null,{default:a(()=>[t(b,{class:"green"}),d(" "+l(n(_)(e.peer.uploadSpeed))+"/s ",1)]),_:2},1024),t(r,null,{default:a(()=>[t(y,{class:"red"}),d(" "+l(n(_)(e.peer.downloadSpeed))+"/s ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),uploadDownload:a(({record:e})=>[t(i,{fill:"",style:{"justify-content":"space-between"}},{default:a(()=>[t(i,{fill:"",direction:"vertical"},{default:a(()=>[t(r,null,{default:a(()=>[t(b,{class:"green"}),d(" "+l(n(_)(e.peer.uploaded)),1)]),_:2},1024),t(r,null,{default:a(()=>[t(y,{class:"red"}),d(" "+l(n(_)(e.peer.downloaded)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),progress:a(({record:e})=>[t(i,null,{default:a(()=>[t(M,{percent:e.peer.progress,size:"mini"},null,8,["percent"]),t(r,null,{default:a(()=>[d(l((e.peer.progress*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1024)]),flags:a(({record:e})=>[H("p",null,[d(l(e.peer.flags)+" ",1),e.peer.flags?(c(),h(A,{key:0},{content:a(()=>[(c(!0),I(J,null,K(F(e.peer.flags),x=>(c(),I("p",{key:x},l(x),1))),128))]),default:a(()=>[t(P)]),_:2},1024)):L("",!0)])]),_:1},8,["data","loading"])]),_:1},8,["visible"])}}}),ne=U(ae,[["__scopeId","data-v-8111769d"]]);export{ne as default};
