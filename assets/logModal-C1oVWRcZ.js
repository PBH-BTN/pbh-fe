import{d as P,e as I}from"./index-Ts6cAD5S.js";import{f as O,a4 as k,r as T,c as f,ab as K,w as B,j as D,s as V,t,y as n,a2 as e,v as i,x as g}from"./libs-CpxaUM-P.js";import{m as j,T as G,a as q,M as E}from"./arcoDesign-BGRPN1Ww.js";var l=(u=>(u.AUTO="AUTO",u.MANUAL="MANUAL",u))(l||{});const Q=O({__name:"logModal",setup(u,{expose:S}){const{t:o,d:y}=k(),r=T(!1);S({showModal:()=>{r.value=!0}});const v=[{title:"ID",slotName:"ruleId"},{title:()=>o("page.rule_management.ruleSubscribe.updateLog.updateTime"),slotName:"updateTime"},{title:()=>o("page.rule_management.ruleSubscribe.updateLog.ruleCount"),dataIndex:"count"},{title:()=>o("page.rule_management.ruleSubscribe.updateLog.updateType"),slotName:"updateType"}],s=T(!0),h={[l.MANUAL]:"page.rule_management.ruleSubscribe.updateLog.updateType.manual",[l.AUTO]:"page.rule_management.ruleSubscribe.updateLog.updateType.auto"},L=f(()=>s.value||w.value||!c.value),{data:z,total:A,current:d,loading:w,pageSize:m,changeCurrent:C,changePageSize:M}=K(P,{defaultParams:[{page:1,pageSize:5}],pagination:{currentKey:"page",pageSizeKey:"pageSize",totalKey:"data.total"},onAfter:()=>{s.value=!1}});B([m,d],()=>{s.value=!0});const c=f(()=>{var p;return(p=z.value)==null?void 0:p.data.results});return(p,_)=>{const b=j,x=G,N=q,U=E;return D(),V(U,{visible:r.value,"onUpdate:visible":_[0]||(_[0]=a=>r.value=a),title:e(o)("page.rule_management.ruleSubscribe.updateLog"),unmountOnClose:"",width:"auto","modal-style":{width:"35vw"}},{default:t(()=>[n(N,{stripe:!0,columns:v,data:c.value,loading:L.value,pagination:{total:e(A),current:e(d),pageSize:e(m),showPageSize:!0,baseSize:4,bufferSize:1},size:"medium",onPageChange:e(C),onPageSizeChange:e(M),class:"banlog-table"},{ruleId:t(({record:a})=>[n(b,{color:e(I)(a.ruleId)},{default:t(()=>[i(g(a.ruleId),1)]),_:2},1032,["color"])]),updateTime:t(({record:a})=>[n(x,null,{default:t(()=>[i(g(e(y)(a.updateTime,"long")),1)]),_:2},1024)]),updateType:t(({record:a})=>[n(b,{color:a.updateType===e(l).MANUAL?"green":"blue"},{default:t(()=>[i(g(e(o)(h[a.updateType]??"page.rule_management.ruleSubscribe.updateLog.updateType.unknown")),1)]),_:2},1032,["color"])]),_:1},8,["data","loading","pagination","onPageChange","onPageSizeChange"])]),_:1},8,["visible","title"])}}});export{Q as default};
