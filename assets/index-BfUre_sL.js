const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./dummyChart-B8dOhnxM.js","./echarts-B_IqDoio.js","./libs-CpxaUM-P.js","./index-DZgh-G1H.js","./arcoDesign-38g_n_En.js","./index-BXIbBrXO.css"])))=>i.map(i=>d[i]);
import{u as U,a as E,g as B,b as M,f as ie,_ as be,c as ne}from"./index-DZgh-G1H.js";import{u as F,E as j,i as N,a as ce,b as le,c as q,d as re,e as ue,f as we,g as De}from"./echarts-B_IqDoio.js";import{f as V,a4 as A,c as T,a as W,r as z,w as G,a5 as X,j as y,s as x,t as l,y as s,a2 as n,v as b,x as g,u as xe,l as ke,a6 as Se,k as R,A as pe,n as Oe,M as Ve,N as Te,p as de,o as Ce,I as Re,F as te,P as ae,q as Ae}from"./libs-CpxaUM-P.js";import{aj as h,L as J,R as Le,r as Pe,F as Y,ak as ee,t as H,a3 as K,C as I,al as me,am as he,V as fe,T as _e,S as ge,an as ve,e as ye,B as $e,af as Ie,w as Ue,v as ze}from"./arcoDesign-38g_n_En.js";import{I as Ee}from"./index-Dm8ZDwOH.js";async function Be(f,e=!1){const a=U();await a.serverAvailable;const t=new URLSearchParams({type:"count",field:f,filter:e?"0.01":"0"}),r=new URL(E(a.endpoint,"api/statistic/analysis/field?"+t.toString()),location.href);return fetch(r,{headers:B()}).then(o=>(a.assertResponseLogin(o),o.json()))}async function Me(f,e,a){const t=U();await t.serverAvailable;const r=new URL(E(t.endpoint,"api/chart/geoip"),location.href),o=f.getTime(),d=e.getTime();return r.searchParams.append("startAt",o.toString()),r.searchParams.append("endAt",d.toString()),r.searchParams.append("bannedOnly",String(a)),fetch(r,{headers:B()}).then(v=>(t.assertResponseLogin(v),v.json()))}async function Fe(f,e,a){const t=U();await t.serverAvailable;const r=new URLSearchParams({startAt:f.getTime().toString(),endAt:e.getTime().toString(),type:a,field:"banAt"}),o=new URL(E(t.endpoint,"api/statistic/analysis/date?"+r.toString()),location.href);return fetch(o,{headers:B()}).then(d=>(t.assertResponseLogin(d),d.json()))}async function je(f,e){const a=U();await a.serverAvailable;const t=new URLSearchParams({startAt:f.getTime().toString(),endAt:e.getTime().toString()}),r=new URL(E(a.endpoint,"api/chart/trend?"+t.toString()),location.href);return fetch(r,{headers:B()}).then(o=>(a.assertResponseLogin(o),o.json()))}async function Ne(f,e){const a=U();await a.serverAvailable;const t=new URLSearchParams({startAt:f.getTime().toString(),endAt:e.getTime().toString()}),r=new URL(E(a.endpoint,"api/chart/traffic?"+t.toString()),location.href);return fetch(r,{headers:B()}).then(o=>(a.assertResponseLogin(o),o.json()))}const qe=V({__name:"banLine",setup(f){const{t:e}=A(),a=T(()=>({text:e("page.charts.loading"),color:t.isDark?"rgb(60, 126, 255)":"rgb(22, 93, 255)",textColor:t.isDark?"rgba(255, 255, 255, 0.9)":"rgb(29, 33, 41)",maskColor:t.isDark?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.4)"})),t=M();F([N,ce,le,q]);const r=i=>{i==="day"?o.range=[h().startOf("day").add(-7,"day").toDate(),new Date]:o.range=[h().startOf("hour").add(-6,"hour").toDate(),new Date]},o=W({timeStep:"day",range:[h().startOf("day").add(-7,"day").toDate(),new Date]}),d=z({xAxis:{type:"time",max:"dataMax"},yAxis:{type:"value"},tooltip:{trigger:"axis"},series:[{data:[],type:"line",name:e("page.charts.line.options.field")}]});G(o,i=>{p(i.range[0],i.range[1],i.timeStep)});const{loading:v,run:p}=X(Fe,{defaultParams:[h().startOf("day").add(-7,"day").toDate(),new Date,"day"],onSuccess:i=>{if(i.data){const c=new Map;for(let u=h(o.range[0]);u.isBefore(h(o.range[1]));u=u.add(1,o.timeStep))c.set(u.valueOf(),0);i.data.forEach(u=>{c.set(h(u.timestamp).startOf(o.timeStep).valueOf(),u.count)}),d.value.series[0].data=Array.from(c).sort(([u],[m])=>u-m).map(([u,m])=>[new Date(u),m])}}});return(i,c)=>{const u=J,m=Le,_=Pe,D=Y,k=ee,S=H,C=K,L=I;return y(),x(L,{hoverable:"",title:n(e)("page.charts.title.line")},{extra:l(()=>[s(C,null,{content:l(()=>[s(S,{model:o},{default:l(()=>[s(D,{field:"timeStep",label:n(e)("page.charts.options.steps"),"label-col-flex":"100px"},{default:l(()=>[s(_,{modelValue:o.timeStep,"onUpdate:modelValue":c[0]||(c[0]=O=>o.timeStep=O),onChange:c[1]||(c[1]=O=>r(O))},{default:l(()=>[s(m,{value:"day"},{default:l(()=>[b(g(n(e)("page.charts.options.day")),1)]),_:1}),s(m,{value:"hour"},{default:l(()=>[b(g(n(e)("page.charts.options.hour")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),s(D,{field:"range",label:n(e)("page.charts.options.days"),"label-col-flex":"100px"},{default:l(()=>[s(k,{"show-time":"",modelValue:o.range,"onUpdate:modelValue":c[2]||(c[2]=O=>o.range=O),"value-format":"Date",shortcuts:o.timeStep==="day"?[{label:n(e)("page.charts.options.shortcut.7days"),value:()=>[n(h)().startOf("day").add(-7,"day").toDate(),new Date]},{label:n(e)("page.charts.options.shortcut.14days"),value:()=>[n(h)().startOf("day").add(-14,"day").toDate(),new Date]},{label:n(e)("page.charts.options.shortcut.30days"),value:()=>[n(h)().startOf("day").add(-30,"day").toDate(),new Date]}]:[{label:n(e)("page.charts.options.shortcut.6hours"),value:()=>[n(h)().startOf("hour").add(-6,"hour").toDate(),new Date]},{label:n(e)("page.charts.options.shortcut.12hours"),value:()=>[n(h)().startOf("hour").add(-12,"hour").toDate(),new Date]},{label:n(e)("page.charts.options.shortcut.24hours"),value:()=>[n(h)().startOf("hour").add(-24,"hour").toDate(),new Date]}]},null,8,["modelValue","shortcuts"])]),_:1},8,["label"])]),_:1},8,["model"])]),default:l(()=>[s(u,null,{default:l(()=>[b(g(n(e)("page.charts.options.more")),1)]),_:1})]),_:1})]),default:l(()=>[s(n(j),{class:"chart",option:d.value,loading:n(v),loadingOptions:a.value,theme:"ovilia-green",autoresize:"","init-options":{renderer:"svg"}},null,8,["option","loading","loadingOptions"])]),_:1},8,["title"])}}}),We=V({__name:"fieldPie",setup(f){const{t:e}=A();F([N,re,ue,q]);const a=M(),t=W({field:"peerId",enableThreshold:!0,mergeSameVersion:!1}),r=T(()=>({text:e("page.charts.loading"),color:a.isDark?"rgb(60, 126, 255)":"rgb(22, 93, 255)",textColor:a.isDark?"rgba(255, 255, 255, 0.9)":"rgb(29, 33, 41)",maskColor:a.isDark?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.4)"})),o=z({tooltip:{trigger:"item",appendToBody:!0,formatter:'<p style="word-wrap:break-all"><b>{b}</b></p>  {c} ({d}%)'},legend:{orient:"vertical",left:"right",type:"scroll",right:10,top:20,bottom:20,data:[],textStyle:{overflow:"truncate",width:100},tooltip:{show:!0}},backgroundColor:a.isDark?"rgba(0, 0, 0, 0.0)":void 0,series:[{name:e("page.charts.options.field."+t.field),type:"pie",radius:"55%",center:["50%","60%"],data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]});G(t,p=>{v(p.field,p.enableThreshold)});const{loading:d,run:v}=X(Be,{defaultParams:["peerId",!0],onSuccess:p=>{if(p.data){const i=p.data.map(c=>(c.data===""&&(c.data=e("page.charts.options.field.empty")),c));if(t.mergeSameVersion&&t.field==="peerId"){const c=new Map;i.forEach(u=>{let m=u.data;const _=m.match(/^([-]?[a-zA-z]+)[0-9]+.*/);_&&(_==null?void 0:_.length)>=2&&(m=_[1]+"*"),c.has(m)?c.set(m,c.get(m)+u.count):c.set(m,u.count)}),o.value.legend.data=[],o.value.series[0].data=[],Array.from(c).forEach(([u,m])=>{o.value.legend.data.push(u),o.value.series[0].data.push({name:u,value:m})})}else o.value.legend.data=i.map(c=>c.data),o.value.series[0].data=i.map(c=>({name:c.data,value:c.count}))}}});return(p,i)=>{const c=J,u=me,m=he,_=Y,D=fe,k=_e,S=ge,C=H,L=K,O=I;return y(),x(O,{hoverable:"",title:n(e)("page.charts.options.field."+t.field)},{extra:l(()=>[s(L,null,{content:l(()=>[s(C,{model:t,style:{width:"25vh"}},{default:l(()=>[s(_,{field:"field",label:n(e)("page.charts.options.field")},{default:l(()=>[s(m,{modelValue:t.field,"onUpdate:modelValue":i[0]||(i[0]=P=>t.field=P),"trigger-props":{autoFitPopupMinWidth:!0}},{default:l(()=>[s(u,{value:"peerId"},{default:l(()=>[b(g(n(e)("page.charts.options.field.peerId")),1)]),_:1}),s(u,{value:"torrentName"},{default:l(()=>[b(g(n(e)("page.charts.options.field.torrentName")),1)]),_:1}),s(u,{value:"module"},{default:l(()=>[b(g(n(e)("page.charts.options.field.module")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),s(_,{field:"enableThreshold"},{default:l(()=>[s(S,null,{default:l(()=>[s(D,{modelValue:t.enableThreshold,"onUpdate:modelValue":i[1]||(i[1]=P=>t.enableThreshold=P)},null,8,["modelValue"]),s(k,null,{default:l(()=>[b(g(n(e)("page.charts.options.thresold")),1)]),_:1})]),_:1})]),_:1}),t.field==="peerId"?(y(),x(_,{key:0,field:"mergeSameVersion"},{default:l(()=>[s(S,null,{default:l(()=>[s(D,{modelValue:t.mergeSameVersion,"onUpdate:modelValue":i[2]||(i[2]=P=>t.mergeSameVersion=P)},null,8,["modelValue"]),s(k,null,{default:l(()=>[b(g(n(e)("page.charts.options.mergeSame")),1)]),_:1})]),_:1})]),_:1})):xe("",!0)]),_:1},8,["model"])]),default:l(()=>[s(c,null,{default:l(()=>[b(g(n(e)("page.charts.options.more")),1)]),_:1})]),_:1})]),default:l(()=>[s(n(j),{class:"chart",option:o.value,loading:n(d),autoresize:"",loadingOptions:r.value,theme:n(a).isDark?"dark":"light","init-options":{renderer:"svg"}},null,8,["option","loading","loadingOptions","theme"])]),_:1},8,["title"])}}}),Ge=V({__name:"trends",setup(f){F([le,N,ce,q]);const{t:e}=A(),a=W({range:[h().startOf("day").add(-7,"day").toDate(),new Date]}),t=M(),r=T(()=>({text:e("page.charts.loading"),color:t.isDark?"rgb(60, 126, 255)":"rgb(22, 93, 255)",textColor:t.isDark?"rgba(255, 255, 255, 0.9)":"rgb(29, 33, 41)",maskColor:t.isDark?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.4)"})),o=z({xAxis:{type:"time",max:"dataMax"},yAxis:{type:"value"},tooltip:{trigger:"axis"},series:[{data:[],type:"line",color:"#A5A051",areaStyle:{color:"#A5A051"},name:e("page.charts.trends.options.peers")},{data:[],type:"line",color:"#DB4D6D",areaStyle:{color:"#DB4D6D"},name:e("page.charts.trends.options.bans")}]});G(a,p=>{v(p.range[0],p.range[1])});const{loading:d,run:v}=X(je,{defaultParams:[h().startOf("day").add(-7,"day").toDate(),new Date],onSuccess:p=>{p.data&&(o.value.series[0].data=p.data.connectedPeersTrend.sort((i,c)=>i.key-c.key).map(i=>[new Date(i.key),i.value]),o.value.series[1].data=p.data.bannedPeersTrend.sort((i,c)=>i.key-c.key).map(i=>[new Date(i.key),i.value]))}});return(p,i)=>{const c=J,u=ee,m=Y,_=H,D=K,k=I;return y(),x(k,{hoverable:"",title:n(e)("page.charts.title.trends")},{extra:l(()=>[s(D,null,{content:l(()=>[s(_,{model:a},{default:l(()=>[s(m,{field:"range",label:n(e)("page.charts.options.days"),"label-col-flex":"100px"},{default:l(()=>[s(u,{"show-time":"",modelValue:a.range,"onUpdate:modelValue":i[0]||(i[0]=S=>a.range=S),"value-format":"Date",shortcuts:[{label:n(e)("page.charts.options.shortcut.7days"),value:()=>[n(h)().startOf("day").add(-7,"day").toDate(),new Date]},{label:n(e)("page.charts.options.shortcut.14days"),value:()=>[n(h)().startOf("day").add(-14,"day").toDate(),new Date]},{label:n(e)("page.charts.options.shortcut.30days"),value:()=>[n(h)().startOf("day").add(-30,"day").toDate(),new Date]}]},null,8,["modelValue","shortcuts"])]),_:1},8,["label"])]),_:1},8,["model"])]),default:l(()=>[s(c,null,{default:l(()=>[b(g(n(e)("page.charts.options.more")),1)]),_:1})]),_:1})]),default:l(()=>[s(n(j),{class:"chart",option:o.value,loading:n(d),loadingOptions:r.value,theme:"ovilia-green",autoresize:"","init-options":{renderer:"svg"}},null,8,["option","loading","loadingOptions"])]),_:1},8,["title"])}}}),Xe=V({__name:"traffic",setup(f){F([N,re,we,le,De,q]);const e=W({range:[h().startOf("day").add(-7,"day").toDate(),new Date]}),a=M(),t=T(()=>({text:r("page.charts.loading"),color:a.isDark?"rgb(60, 126, 255)":"rgb(22, 93, 255)",textColor:a.isDark?"rgba(255, 255, 255, 0.9)":"rgb(29, 33, 41)",maskColor:a.isDark?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.4)"})),{t:r,d:o}=A(),d=z({tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(i){var c;return((c=i[0])==null?void 0:c.name)+":<br/>"+i.map(u=>`${u.marker} ${u.seriesName}: ${ie(u.value)}`).join("<br>")}},legend:{data:[r("page.charts.traffic.options.download"),r("page.charts.traffic.options.upload")]},xAxis:[{type:"category",axisTick:{show:!1},data:[]}],yAxis:[{type:"log",logBase:10,min:1,axisLabel:{formatter:i=>i===1?"0":ie(i)}}],series:[{name:r("page.charts.traffic.options.download"),type:"bar",barGap:0,emphasis:{focus:"series"},data:[]},{name:r("page.charts.traffic.options.upload"),type:"bar",emphasis:{focus:"series"},data:[]}]});G(e,i=>{p(i.range[0],i.range[1])});const{loading:v,run:p}=X(Ne,{defaultParams:[h().startOf("day").add(-7,"day").toDate(),new Date],onSuccess:i=>{i.data&&(d.value.xAxis[0].data.splice(0),d.value.series[0].data.splice(0),d.value.series[1].data.splice(0),i.data.journal.forEach(c=>{d.value.xAxis[0].data.push(o(new Date(c.timestamp),"short")),d.value.series[0].data.push(c.downloaded),d.value.series[1].data.push(c.uploaded)}))}});return(i,c)=>{const u=J,m=ee,_=Y,D=H,k=ve,S=ye,C=K,L=I;return y(),x(L,{hoverable:"",title:n(r)("page.charts.title.traffic")},{extra:l(()=>[s(C,null,{content:l(()=>[s(D,{model:e},{default:l(()=>[s(_,{field:"range",label:n(r)("page.charts.options.days"),"label-col-flex":"100px"},{default:l(()=>[s(m,{"show-time":"",modelValue:e.range,"onUpdate:modelValue":c[0]||(c[0]=O=>e.range=O),"value-format":"Date",shortcuts:[{label:n(r)("page.charts.options.shortcut.7days"),value:()=>[n(h)().startOf("day").add(-7,"day").toDate(),new Date]},{label:n(r)("page.charts.options.shortcut.14days"),value:()=>[n(h)().startOf("day").add(-14,"day").toDate(),new Date]},{label:n(r)("page.charts.options.shortcut.30days"),value:()=>[n(h)().startOf("day").add(-30,"day").toDate(),new Date]}]},null,8,["modelValue","shortcuts"])]),_:1},8,["label"])]),_:1},8,["model"])]),default:l(()=>[s(u,null,{default:l(()=>[b(g(n(r)("page.charts.options.more")),1)]),_:1}),s(S,{content:n(r)("page.charts.tooltip.traffic")},{default:l(()=>[s(k)]),_:1},8,["content"])]),_:1})]),default:l(()=>[s(n(j),{class:"chart",option:d.value,loading:n(v),loadingOptions:t.value,theme:"ovilia-green",autoresize:"","init-options":{renderer:"svg"}},null,8,["option","loading","loadingOptions"])]),_:1},8,["title"])}}}),Je=V({__name:"plusWarpper",props:{title:{}},setup(f){const e=Se(()=>be(()=>import("./dummyChart-B8dOhnxM.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),{t:a}=A(),t=U(),r=T(()=>t.plusStatus),o=()=>{t.emmitter.emit("open-plus-modal")};return(d,v)=>{var m;const p=Ee,i=$e,c=Ie,u=I;return(m=r.value)!=null&&m.activated?ke(d.$slots,"default",{key:0},void 0,!0):(y(),x(u,{key:1,hoverable:"",title:d.title},{default:l(()=>[s(c,{class:"overlay",status:"warning",title:n(a)("page.charts.locked")},{icon:l(()=>[s(p)]),subtitle:l(()=>[b(g(n(a)("page.charts.locked.tips")),1)]),extra:l(()=>[s(i,{type:"primary",onClick:o},{default:l(()=>[b(g(n(a)("page.charts.locked.active")),1)]),_:1})]),_:1},8,["title"]),s(n(e))]),_:1},8,["title"]))}}}),oe=ne(Je,[["__scopeId","data-v-fa9c84e8"]]),Ye={},He={class:"cell"};function Ke(f,e){return y(),R("span",He,g(""))}const Qe=ne(Ye,[["render",Ke]]),Ze=V({__name:"TileView",props:{tile:{}},setup(f){const e=f,{tile:a}=pe(e),t=T(()=>{var r=["tile"];return r.push("tile"+a.value.value),a.value.mergedInto||r.push("position_"+a.value.row+"_"+a.value.column),a.value.mergedInto&&r.push("merged"),a.value.isNew()&&r.push("new"),a.value.hasMoved()&&(r.push("row_from_"+a.value.fromRow()+"_to_"+a.value.toRow()),r.push("column_from_"+a.value.fromColumn()+"_to_"+a.value.toColumn()),r.push("isMoving")),r.join(" ")});return(r,o)=>(y(),R("span",{class:Oe(t.value)},g(n(a).value),3))}}),et={class:"overlay"},tt={class:"message"},at=V({__name:"GameEndOverlay",props:{board:{},onrestart:{type:Function}},setup(f){const e=f,{board:a}=pe(e),t=T(()=>a.value.hasWon()||a.value.hasLost()),r=T(()=>a.value.hasWon()?"Good Job!":a.value.hasLost()?"Game Over":""),o=()=>{e.onrestart&&e.onrestart()};return(d,v)=>Ve((y(),R("div",et,[de("p",tt,g(r.value),1),de("button",{class:"tryAgain",onClick:o},"Try again")],512)),[[Te,t.value]])}}),Z=class Z{constructor(e,a,t){this.value=e||0,this.row=a||-1,this.column=t||-1,this.oldRow=-1,this.oldColumn=-1,this.markForDeletion=!1,this.mergedInto=null,this.id=Z.id++}moveTo(e,a){this.oldRow=this.row,this.oldColumn=this.column,this.row=e,this.column=a}isNew(){return this.oldRow===-1&&!this.mergedInto}hasMoved(){return this.fromRow()!==-1&&(this.fromRow()!==this.toRow()||this.fromColumn()!==this.toColumn())||this.mergedInto!==null}fromRow(){return this.mergedInto?this.row:this.oldRow}fromColumn(){return this.mergedInto?this.column:this.oldColumn}toRow(){return this.mergedInto?this.mergedInto.row:this.row}toColumn(){return this.mergedInto?this.mergedInto.column:this.column}};Z.id=0;let se=Z;const w=class w{constructor(){this.tiles=[],this.cells=[];for(let e=0;e<w.size;++e)this.cells[e]=[this.addTile(),this.addTile(),this.addTile(),this.addTile()];this.addRandomTile(),this.setPositions(),this.won=!1}addTile(e){const a=new se(e);return this.tiles.push(a),a}moveLeft(){let e=!1;for(let a=0;a<w.size;++a){const t=this.cells[a].filter(o=>o.value!=0),r=[];for(let o=0;o<w.size;++o){let d=t.length>0?t.shift():this.addTile();if(t.length>0&&t[0].value===d.value){const v=d;d=this.addTile(d.value),v.mergedInto=d;const p=t.shift();p.mergedInto=d,d.value+=p.value}r[o]=d,this.won=this.won||d.value===2048,e=e||d.value!==this.cells[a][o].value}this.cells[a]=r}return e}setPositions(){this.cells.forEach((e,a)=>{e.forEach((t,r)=>{t.oldRow=t.row,t.oldColumn=t.column,t.row=a,t.column=r,t.markForDeletion=!1})})}addRandomTile(){const e=[];for(let o=0;o<w.size;++o)for(let d=0;d<w.size;++d)this.cells[o][d].value===0&&e.push({r:o,c:d});const a=Math.floor(Math.random()*e.length),t=e[a],r=Math.random()<w.fourProbability?4:2;this.cells[t.r][t.c]=this.addTile(r)}move(e){this.clearOldTiles();for(let t=0;t<e;++t)this.cells=this.rotateLeft(this.cells);const a=this.moveLeft();for(let t=e;t<4;++t)this.cells=this.rotateLeft(this.cells);return a&&this.addRandomTile(),this.setPositions(),this}clearOldTiles(){this.tiles=this.tiles.filter(e=>!e.markForDeletion),this.tiles.forEach(e=>e.markForDeletion=!0)}hasWon(){return this.won}hasLost(){let e=!1;for(let a=0;a<w.size;++a)for(let t=0;t<w.size;++t){e=e||this.cells[a][t].value===0;for(let r=0;r<4;++r){const o=a+w.deltaX[r],d=t+w.deltaY[r];o<0||o>=w.size||d<0||d>=w.size||(e=e||this.cells[a][t].value===this.cells[o][d].value)}}return!e}rotateLeft(e){const a=e.length,t=e[0].length,r=[];for(let o=0;o<a;++o){r.push([]);for(let d=0;d<t;++d)r[o][d]=e[d][t-o-1]}return r}};w.size=4,w.fourProbability=.1,w.deltaX=[-1,0,1,0],w.deltaY=[0,-1,0,1];let Q=w;const ot={class:"board",tabIndex:"1"},st=V({__name:"BoardView",setup(f){const e=z(new Q),a=o=>{if(!e.value.hasWon()&&o.keyCode>=37&&o.keyCode<=40){o.preventDefault();var d=o.keyCode-37;e.value.move(d)}},t=()=>{e.value=new Q};Ce(()=>{window.addEventListener("keydown",a)}),Re(()=>{window.removeEventListener("keydown",a)});const r=T(()=>e.value.tiles.filter(o=>o.value!=0));return(o,d)=>(y(),R("div",ot,[(y(!0),R(te,null,ae(e.value.cells,(v,p)=>(y(),R("div",{key:p},[(y(!0),R(te,null,ae(v,(i,c)=>(y(),x(Qe,{key:c}))),128))]))),128)),(y(!0),R(te,null,ae(r.value,(v,p)=>(y(),x(Ze,{tile:v,key:p},null,8,["tile"]))),128)),s(at,{board:e.value,onrestart:t},null,8,["board"])]))}}),nt={name:"vue-2048",components:{BoardView:st}};function lt(f,e,a,t,r,o){const d=Ae("BoardView");return y(),x(d,{style:{margin:"0 auto"}})}const rt=ne(nt,[["render",lt]]),it=V({__name:"index",setup(f){const{t:e}=A();return(a,t)=>{const r=ve,o=ye,d=I;return y(),x(d,{hoverable:"",title:"2048"},{extra:l(()=>[s(o,{content:n(e)("page.charts.tooltip.2048")},{default:l(()=>[s(r)]),_:1},8,["content"])]),default:l(()=>[s(rt,{style:{margin:"0 auto"}})]),_:1})}}}),dt=V({__name:"ispPie",setup(f){const{t:e}=A();F([N,re,ue,q]);const a=M(),t=W({field:"isp",enableThreshold:!0,bannedOnly:!0,range:[h().startOf("day").add(-7,"day").toDate(),new Date]}),r=T(()=>({text:e("page.charts.loading"),color:a.isDark?"rgb(60, 126, 255)":"rgb(22, 93, 255)",textColor:a.isDark?"rgba(255, 255, 255, 0.9)":"rgb(29, 33, 41)",maskColor:a.isDark?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.4)"})),o=z({tooltip:{trigger:"item",appendToBody:!0,formatter:'<p style="word-wrap:break-all"><b>{b}</b></p>  {c} ({d}%)'},legend:{orient:"vertical",left:"right",type:"scroll",right:10,top:20,bottom:20,data:[],textStyle:{overflow:"truncate",width:100},tooltip:{show:!0}},backgroundColor:a.isDark?"rgba(0, 0, 0, 0.0)":void 0,series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]});G(t,p=>{v(p.range[0],p.range[1],t.bannedOnly)});const{loading:d,run:v}=X(Me,{defaultParams:[h().startOf("day").add(-7,"day").toDate(),new Date,t.bannedOnly],onSuccess:p=>{if(p.data){const i=p.data[t.field];let c;if(t.enableThreshold){const m=i.reduce((_,D)=>_+D.value,0)*.01;c=i.filter(_=>_.value>=m)}else c=i;o.value.legend.data=c.map(u=>u.key),o.value.series[0].data=c.map(u=>({name:u.key==="N/A"&&t.field==="province"?e("page.charts.data.province.na"):u.key,value:u.value})),o.value.series[0].name=e("page.charts.options.field."+t.field)}}});return(p,i)=>{const c=J,u=me,m=he,_=Y,D=ee,k=fe,S=_e,C=ge,L=H,O=K,P=I;return y(),x(P,{hoverable:"",title:n(e)("page.charts.title.geoip")+(t.bannedOnly?n(e)("page.charts.subtitle.bannedOnly"):"")},{extra:l(()=>[s(O,null,{content:l(()=>[s(L,{model:t},{default:l(()=>[s(_,{field:"field",label:n(e)("page.charts.options.field")},{default:l(()=>[s(m,{modelValue:t.field,"onUpdate:modelValue":i[0]||(i[0]=$=>t.field=$),"trigger-props":{autoFitPopupMinWidth:!0}},{default:l(()=>[s(u,{value:"isp"},{default:l(()=>[b(g(n(e)("page.charts.options.field.isp")),1)]),_:1}),s(u,{value:"province"},{default:l(()=>[b(g(n(e)("page.charts.options.field.province")),1)]),_:1}),s(u,{value:"city"},{default:l(()=>[b(g(n(e)("page.charts.options.field.city")),1)]),_:1}),s(u,{value:"region"},{default:l(()=>[b(g(n(e)("page.charts.options.field.region")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),s(_,{field:"range",label:n(e)("page.charts.options.days"),"label-col-flex":"100px"},{default:l(()=>[s(D,{"show-time":"",modelValue:t.range,"onUpdate:modelValue":i[1]||(i[1]=$=>t.range=$),"value-format":"Date",shortcuts:[{label:n(e)("page.charts.options.shortcut.7days"),value:()=>[n(h)().startOf("day").add(-7,"day").toDate(),new Date]},{label:n(e)("page.charts.options.shortcut.14days"),value:()=>[n(h)().startOf("day").add(-14,"day").toDate(),new Date]},{label:n(e)("page.charts.options.shortcut.30days"),value:()=>[n(h)().startOf("day").add(-30,"day").toDate(),new Date]}]},null,8,["modelValue","shortcuts"])]),_:1},8,["label"]),s(_,{field:"enableThreshold"},{default:l(()=>[s(C,null,{default:l(()=>[s(k,{modelValue:t.enableThreshold,"onUpdate:modelValue":i[2]||(i[2]=$=>t.enableThreshold=$)},null,8,["modelValue"]),s(S,null,{default:l(()=>[b(g(n(e)("page.charts.options.thresold")),1)]),_:1})]),_:1})]),_:1}),s(_,{field:"bannedOnly"},{default:l(()=>[s(C,null,{default:l(()=>[s(k,{modelValue:t.bannedOnly,"onUpdate:modelValue":i[3]||(i[3]=$=>t.bannedOnly=$)},null,8,["modelValue"]),s(S,null,{default:l(()=>[b(g(n(e)("page.charts.options.bannedOnly")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),default:l(()=>[s(c,null,{default:l(()=>[b(g(n(e)("page.charts.options.more")),1)]),_:1})]),_:1})]),default:l(()=>[s(n(j),{class:"chart",option:o.value,loading:n(d),autoresize:"",loadingOptions:r.value,theme:n(a).isDark?"dark":"light","init-options":{renderer:"svg"}},null,8,["option","loading","loadingOptions","theme"])]),_:1},8,["title"])}}}),ft=V({__name:"index",setup(f){const{t:e}=A();return(a,t)=>{const r=ze,o=Ue;return y(),x(o,{justify:"center",align:"stretch",wrap:!0,gutter:[{xs:12,sm:12,md:12,lg:12,xl:24},{xs:12,sm:12,md:12,lg:12,xl:24}]},{default:l(()=>[s(r,{xl:12,lg:24,md:24,sm:24,xs:24},{default:l(()=>[s(qe)]),_:1}),s(r,{xl:12,lg:24,md:24,sm:24,xs:24},{default:l(()=>[s(We)]),_:1}),s(r,{xl:12,lg:24,md:24,sm:24,xs:24},{default:l(()=>[s(oe,{title:n(e)("page.charts.title.trends")},{default:l(()=>[s(Ge)]),_:1},8,["title"])]),_:1}),s(r,{xl:12,lg:24,md:24,sm:24,xs:24},{default:l(()=>[s(oe,{title:n(e)("page.charts.title.traffic")},{default:l(()=>[s(Xe)]),_:1},8,["title"])]),_:1}),s(r,{xl:12,lg:24,md:24,sm:24,xs:24},{default:l(()=>[s(oe,{title:n(e)("page.charts.title.geoip")},{default:l(()=>[s(dt)]),_:1},8,["title"])]),_:1}),s(r,{xl:12,lg:24,md:24,sm:24,xs:24},{default:l(()=>[s(it)]),_:1})]),_:1})}}});export{ft as default};
